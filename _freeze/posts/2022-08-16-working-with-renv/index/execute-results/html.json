{
  "hash": "2fe872fc0bde0b2efd153020bbdc9fb3",
  "result": {
    "markdown": "---\ntitle: \"Uptating Ubuntu packages crashed my renv R project\"\nauthor: \"Philippe Massicotte\"\ndate: \"2022-08-16\"\ncategories: [R, R tips]\n# https://quarto.org/docs/websites/website-tools.html#preview-images\nimage: \"img/preview.png\" \neditor_options: \n  chunk_output_type: console\n---\n\n\nI am using `renv` quite a lot. Recently, I had to return to an older project that was using this package to manage package dependencies. When I tried to load `tidyverse`, I got the following message:\n\n``` r\n> library(tidyverse)\nError: package or namespace load failed for ‘tidyverse’ in dyn.load(file, DLLpath = DLLpath, ...):\n  unable to load shared object '/home/xxx/.local/share/renv/cache/v5/R-4.2/x86_64-pc-linux-gnu/stringi/1.7.6/bba431031d30789535745a9627ac9271/stringi/libs/stringi.so':\n  libicui18n.so.66: cannot open shared object file: No such file or directory\n```\n\nThis [means](https://github.com/rstudio/renv/issues/309) that `stringi` v1.7.6 (a dependency for the `tidyverse`) was originally compiled with a certain version of `libicui18n`, and that after a system update/upgrade on my Ubuntu computer, this file no longer exists. One solution to fix this is to rebuild the `stringi` package using the new version of `libicui18n` installed on your computer. To do so, you can use `renv::install(package_name@version)` to specify a specific version of an R package to be installed/compiled.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrenv::install(\n  \"stringi@1.7.6\",\n  rebuild = TRUE,\n  repos = \"https://cran.rstudio.com/\"\n)\n```\n:::\n\n\n`stringi@1.7.6` means to install version 1.7.6 of the package, the same version that was included in the `renv.lock` file. After this operation, you should be able to do `library(tidyverse)` without problems.\n\nIf for whatever reason you have to change to a specific version of an R package, you can use `renv::record()` to modify the `renv.lock` file:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrenv::record(\"stringi@1.7.8\")\n```\n:::\n\n\n<details>\n\n<summary>Session info</summary>\n\n\n::: {.cell}\n\n```\n#> ─ Session info ───────────────────────────────────────────────────────────────────────────────────────────────────────\n#>  setting  value\n#>  version  R version 4.2.1 (2022-06-23)\n#>  os       Ubuntu 22.04.1 LTS\n#>  system   x86_64, linux-gnu\n#>  ui       X11\n#>  language en_CA:en\n#>  collate  en_CA.UTF-8\n#>  ctype    en_CA.UTF-8\n#>  tz       America/Toronto\n#>  date     2022-08-20\n#>  pandoc   NA (via rmarkdown)\n#> \n#> ─ Packages ───────────────────────────────────────────────────────────────────────────────────────────────────────────\n#>  ! package     * version date (UTC) lib source\n#>  P cachem        1.0.6   2021-08-19 [?] RSPM (R 4.2.0)\n#>  P callr         3.7.1   2022-07-13 [?] RSPM (R 4.2.0)\n#>  P cli           3.3.0   2022-04-25 [?] RSPM (R 4.2.0)\n#>  P crayon        1.5.1   2022-03-26 [?] RSPM (R 4.2.0)\n#>  P devtools      2.4.4   2022-07-20 [?] RSPM (R 4.2.0)\n#>  P digest        0.6.29  2021-12-01 [?] RSPM (R 4.2.0)\n#>  P ellipsis      0.3.2   2021-04-29 [?] RSPM (R 4.2.0)\n#>  P evaluate      0.16    2022-08-09 [?] RSPM (R 4.2.0)\n#>  P fastmap       1.1.0   2021-01-25 [?] RSPM (R 4.2.0)\n#>  P fs            1.5.2   2021-12-08 [?] RSPM (R 4.2.0)\n#>  P glue          1.6.2   2022-02-24 [?] RSPM (R 4.2.0)\n#>  P htmltools     0.5.3   2022-07-18 [?] RSPM (R 4.2.0)\n#>  P htmlwidgets   1.5.4   2021-09-08 [?] RSPM (R 4.2.0)\n#>  P httpuv        1.6.5   2022-01-05 [?] RSPM (R 4.2.0)\n#>  P jsonlite      1.8.0   2022-02-22 [?] RSPM (R 4.2.0)\n#>  P knitr         1.39    2022-04-26 [?] RSPM (R 4.2.0)\n#>  P later         1.3.0   2021-08-18 [?] RSPM (R 4.2.0)\n#>  P lifecycle     1.0.1   2021-09-24 [?] RSPM (R 4.2.0)\n#>  P magrittr      2.0.3   2022-03-30 [?] RSPM (R 4.2.0)\n#>  P memoise       2.0.1   2021-11-26 [?] RSPM (R 4.2.0)\n#>  P mime          0.12    2021-09-28 [?] RSPM (R 4.2.0)\n#>  P miniUI        0.1.1.1 2018-05-18 [?] RSPM (R 4.2.0)\n#>  P pkgbuild      1.3.1   2021-12-20 [?] RSPM (R 4.2.0)\n#>  P pkgload       1.3.0   2022-06-27 [?] RSPM (R 4.2.0)\n#>  P prettyunits   1.1.1   2020-01-24 [?] RSPM (R 4.2.0)\n#>  P processx      3.7.0   2022-07-07 [?] RSPM (R 4.2.0)\n#>  P profvis       0.3.7   2020-11-02 [?] RSPM (R 4.2.0)\n#>  P promises      1.2.0.1 2021-02-11 [?] RSPM (R 4.2.0)\n#>  P ps            1.7.1   2022-06-18 [?] RSPM (R 4.2.0)\n#>  P purrr         0.3.4   2020-04-17 [?] RSPM (R 4.2.0)\n#>  P R6            2.5.1   2021-08-19 [?] RSPM (R 4.2.0)\n#>  P Rcpp          1.0.9   2022-07-08 [?] RSPM (R 4.2.0)\n#>  P remotes       2.4.2   2021-11-30 [?] RSPM (R 4.2.0)\n#>    renv          0.15.5  2022-05-26 [1] RSPM (R 4.2.0)\n#>  P rlang         1.0.4   2022-07-12 [?] RSPM (R 4.2.0)\n#>  P rmarkdown     2.14    2022-04-25 [?] RSPM (R 4.2.0)\n#>  P sessioninfo   1.2.2   2021-12-06 [?] RSPM (R 4.2.0)\n#>  P shiny         1.7.2   2022-07-19 [?] RSPM (R 4.2.0)\n#>  P stringi       1.7.8   2022-07-11 [?] RSPM (R 4.2.0)\n#>  P stringr       1.4.0   2019-02-10 [?] RSPM (R 4.2.0)\n#>  P urlchecker    1.0.1   2021-11-30 [?] RSPM (R 4.2.0)\n#>  P usethis       2.1.6   2022-05-25 [?] RSPM (R 4.2.0)\n#>  P xfun          0.32    2022-08-10 [?] RSPM (R 4.2.0)\n#>  P xtable        1.8-4   2019-04-21 [?] RSPM (R 4.2.0)\n#>  P yaml          2.3.5   2022-02-21 [?] RSPM (R 4.2.0)\n#> \n#>  [1] /media/work/r-blog/renv/library/R-4.2/x86_64-pc-linux-gnu\n#>  [2] /usr/local/lib/R/library\n#> \n#>  P ── Loaded and on-disk path mismatch.\n#> \n#> ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────\n```\n:::\n\n\n</details>\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}