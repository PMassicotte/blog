<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.36">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Philippe Massicotte">
<meta name="dcterms.date" content="2022-04-28">
<title>Welcome to my blog - Changing spatial resolution of a raster with terra</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><link rel="stylesheet" href="../../styles.css">
</head>
<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Welcome to my blog</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link" href="../../about.html">About</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../publications.html">Publications</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../presentations.html">Presentations</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../workshops.html">Workshops and teaching</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/pmassicotte"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/philmassicotte"><i class="bi bi-twitter" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../users/5558188/philippe-massicotte"><i class="bi bi-stack-overflow" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"><i class="bi bi-rss" role="img">
</i> 
 </a>
  </li>  
</ul>
<div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><header id="title-block-header" class="quarto-title-block default page-columns page-full"><div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Changing spatial resolution of a raster with terra</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">R</div>
                <div class="quarto-category">geospatial</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Philippe Massicotte </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">April 28, 2022</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content"><p>Lately, I was working on a project and I needed to change the spatial resolution of a GeoTIFF to match that of another one. After looking around, I posted <a href="https://stackoverflow.com/questions/72044284/how-to-change-a-raster-to-a-specific-spatial-resolution/72044772#72044772">a question on Stackoverflow</a>. After experimenting around, I decided to blog about my experience of changing the spatial resolution of GeoTIFF rasters.</p>
<p>In this post, we will explore two ways to change the spatial resolution of a raster:</p>
<ol type="1">
<li>Aggregating/disaggregating pixels.</li>
<li>Resampling pixels from one geometry to another one.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/usgs-nSOZqxCIEAs-unsplash.jpg" class="img-fluid figure-img" style="width:75.0%"></p>
<p></p><figcaption class="figure-caption">Shimmering blues and greens accentuate the textures of the Sierra de Velasco Mountains of northern Argentina. The urban area (pinkish circle) near the lower left part of the mountain range is La Rioja, the capital of the province of La Rioja. Follow the foothills to the upper right, where the city of San Fernando del Valle de Catamarca lies near extensive vineyards and fruit-growing areas (blue blocky shapes).</figcaption><p></p>
</figure>
</div>
<center>
Photo by <a href="https://unsplash.com/@usgs?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">USGS</a> on <a href="https://unsplash.com/s/photos/landsat?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a>
</center>
<section id="aggregating-a-raster" class="level2"><h2 class="anchored" data-anchor-id="aggregating-a-raster">Aggregating a raster</h2>
<p>I like to think that aggregating is the process of combining/merging the pixels of a raster and hence <strong>reducing its spatial resolution</strong>. When combining a set of neighbour pixels into a single pixel, one needs to define the statistical summary to be applied to the ensemble of the combined pixel. Such function can be the mean, median, min, maximum or any other function that produces a single numerical value.</p>
<p>Let’s see how aggregation works using the <code>terra</code> R package. First, I will make a function that will be used to quickly display the pixel values of a raster.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">plot_raster</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">r</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">r</span>, axes <span class="op">=</span> <span class="cn">FALSE</span>, legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fu">as.polygons</span><span class="op">(</span><span class="va">r</span>, dissolve <span class="op">=</span> <span class="cn">FALSE</span>, trunc <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/text.html">text</a></span><span class="op">(</span><span class="va">r</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For simplicity purposes, I will create a 4 by 4 raster containing values between 1 and 16.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/terra/">terra</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a 4 x 4 matrix</span></span>
<span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">16</span>, ncol <span class="op">=</span> <span class="fl">4</span>, nrow <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Convert the matrix into a raster</span></span>
<span><span class="va">r16</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html">rast</a></span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span>
<span></span>
<span><span class="va">r16</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 4, 4, 1  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 1, 1  (x, y)</span></span>
<span><span class="co">#&gt; extent      : 0, 4, 0, 4  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. :  </span></span>
<span><span class="co">#&gt; source      : memory </span></span>
<span><span class="co">#&gt; name        : lyr.1 </span></span>
<span><span class="co">#&gt; min value   :     1 </span></span>
<span><span class="co">#&gt; max value   :    16</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Using <code>plot_raster()</code>, we can display the value of each pixel within the raster.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">plot_raster</span><span class="op">(</span><span class="va">r16</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Imagine now that we would like to aggregate the raster <code>r16</code> so it becomes a raster of 2 by 2 (i.e.&nbsp;4 pixels). To achieve this, we can combine pixels 2 by 2 (horizontally and vertically) using the <code><a href="https://rdrr.io/pkg/terra/man/aggregate.html">aggregate()</a></code> function and the argument <code>fact = 2</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Aggregate the raster using 2 pixels within the horizontal and the vertical directions</span></span>
<span><span class="va">r4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/aggregate.html">aggregate</a></span><span class="op">(</span><span class="va">r16</span>, fact <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="va">r4</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 2, 2, 1  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 2, 2  (x, y)</span></span>
<span><span class="co">#&gt; extent      : 0, 4, 0, 4  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. :  </span></span>
<span><span class="co">#&gt; source      : memory </span></span>
<span><span class="co">#&gt; name        : lyr.1 </span></span>
<span><span class="co">#&gt; min value   :   3.5 </span></span>
<span><span class="co">#&gt; max value   :  13.5</span></span>
<span></span>
<span><span class="fu">plot_raster</span><span class="op">(</span><span class="va">r4</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>What happened is that, by default, the <code><a href="https://rdrr.io/pkg/terra/man/aggregate.html">aggregate()</a></code> function is using the <code><a href="https://rdrr.io/pkg/terra/man/summarize-generics.html">mean()</a></code> function to summarize the pixel values. Hence, the upper left pixel has a value of 3.5 which correspond to the average of 4 pixels <code>(1 + 5 + 2 + 6) / 4 = 3.5</code>. As mentioned previously, one can use any function that returns a single value such as the <code><a href="https://rdrr.io/r/base/Extremes.html">min()</a></code> function.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Aggregate using the min() function</span></span>
<span><span class="fu">plot_raster</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/aggregate.html">aggregate</a></span><span class="op">(</span><span class="va">r16</span>, fun <span class="op">=</span> <span class="st">"min"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section><section id="disaggregating-a-raster" class="level2"><h2 class="anchored" data-anchor-id="disaggregating-a-raster">Disaggregating a raster</h2>
<p>If aggregating is the process of combining pixels, disaggregating is the process of <strong>splitting</strong> pixels into smaller ones. This operation is done with <code><a href="https://rdrr.io/pkg/terra/man/disaggregate.html">disagg()</a></code>. Using the original 4 x 4 <code>r16</code>raster, each pixel will be disaggregated into 16 smaller pixels, once again using the <code>fact</code> argument.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">r256</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/disaggregate.html">disagg</a></span><span class="op">(</span><span class="va">r16</span>, fact <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">r256</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 16, 16, 1  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 0.25, 0.25  (x, y)</span></span>
<span><span class="co">#&gt; extent      : 0, 4, 0, 4  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. :  </span></span>
<span><span class="co">#&gt; source      : memory </span></span>
<span><span class="co">#&gt; name        : lyr.1 </span></span>
<span><span class="co">#&gt; min value   :     1 </span></span>
<span><span class="co">#&gt; max value   :    16</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here, each pixel of the original <code>r16</code> raster is divided into 16 smaller pixels (4 x 4), giving a total of 256 pixels (16 x 16).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">plot_raster</span><span class="op">(</span><span class="va">r256</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section><section id="resampling" class="level2"><h2 class="anchored" data-anchor-id="resampling">Resampling</h2>
<p>Resampling is the process of transferring the values from a raster into another raster that does not have the same geometry (i.e.&nbsp;cell size). This is often the case when working with remote-sensing products that are derived from sources with different spatial resolutions. For the following examples, I will use data from Sentinel-2 (10 meters resolution) and Landsat-8 (30 meters resolution). Both scenes are from the same area and <a href="taken%2015%20minutes%20apart">https://www.gisagmaps.com/l8-s2-comparison-and-download/</a>. Raster files can be downloaded on <a href="www.gisagmaps.com">https://www.gisagmaps.com/l8-s2-comparison-and-download/L8_S2_080415_Comparison.zip</a>. Images contain the top of atmosphere (TOA) reflectance and we will use the RGB bands.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">s2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html">rast</a></span><span class="op">(</span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_ls.html">dir_ls</a></span><span class="op">(</span><span class="st">"data/L8_S2_080415_Comparison/S2_080415_TOA"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">s2</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 451, 451, 3  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 10, 10  (x, y)</span></span>
<span><span class="co">#&gt; extent      : 282040, 286550, 4564930, 4569440  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. : WGS 84 / UTM zone 17N (EPSG:32617) </span></span>
<span><span class="co">#&gt; sources     : S2_B2_10m_080415_TOA.tif  </span></span>
<span><span class="co">#&gt;               S2_B3_10m_080415_TOA.tif  </span></span>
<span><span class="co">#&gt;               S2_B4_10m_080415_TOA.tif  </span></span>
<span><span class="co">#&gt; names       : S2_B2_10m_080415_TOA, S2_B3_10m_080415_TOA, S2_B4_10m_080415_TOA</span></span>
<span></span>
<span><span class="va">l8</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html">rast</a></span><span class="op">(</span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_ls.html">dir_ls</a></span><span class="op">(</span><span class="st">"data/L8_S2_080415_Comparison/L8_080415_TOA"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">l8</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 150, 150, 3  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 30, 30  (x, y)</span></span>
<span><span class="co">#&gt; extent      : 282045, 286545, 4564935, 4569435  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. : WGS 84 / UTM zone 17N (EPSG:32617) </span></span>
<span><span class="co">#&gt; sources     : L8_B2_080415_TOA.tif  </span></span>
<span><span class="co">#&gt;               L8_B3_080415_TOA.tif  </span></span>
<span><span class="co">#&gt;               L8_B4_080415_TOA.tif  </span></span>
<span><span class="co">#&gt; names       : L8_B2_080415_TOA, L8_B3_080415_TOA, L8_B4_080415_TOA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can easily see the difference in spatial resolution between the two images.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>, oma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plotRGB.html">plotRGB</a></span><span class="op">(</span><span class="va">s2</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">1</span>, stretch <span class="op">=</span> <span class="st">"lin"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/mtext.html">mtext</a></span><span class="op">(</span><span class="st">"Sentinel-2 (10 meters)"</span>, side <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>, oma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plotRGB.html">plotRGB</a></span><span class="op">(</span><span class="va">l8</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">1</span>, stretch <span class="op">=</span> <span class="st">"lin"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/mtext.html">mtext</a></span><span class="op">(</span><span class="st">"Landsat-8 (30 meters)"</span>, side <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-9-2.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Because the two rasters (<code>s2</code> and <code>l8</code>) do not have the same geometry, algebra operations can not be performed.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">l8</span> <span class="op">-</span> <span class="va">s2</span></span>
<span><span class="co">#&gt; Error: [-] extents do not match</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Given that the pixel resolution of the Landsat-8 image is exactly a factor of 3 compared to Sentinel-2, one can be tempted to use <code><a href="https://rdrr.io/pkg/terra/man/disaggregate.html">disagg()</a></code> to get the 10 m pixel resolution from the Landsat-8 so it matches the resolution of the Sentinel-2 image.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">l8_10m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/disaggregate.html">disagg</a></span><span class="op">(</span><span class="va">l8</span>, fact <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">l8_10m</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 450, 450, 3  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 10, 10  (x, y)</span></span>
<span><span class="co">#&gt; extent      : 282045, 286545, 4564935, 4569435  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. : WGS 84 / UTM zone 17N (EPSG:32617) </span></span>
<span><span class="co">#&gt; source      : memory </span></span>
<span><span class="co">#&gt; names       : L8_B2_080415_TOA, L8_B3_080415_TOA, L8_B4_080415_TOA </span></span>
<span><span class="co">#&gt; min values  :       0.07772131,       0.05887134,       0.03377673 </span></span>
<span><span class="co">#&gt; max values  :        0.2687978,        0.3173852,        0.3191263</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/dimensions.html">res</a></span><span class="op">(</span><span class="va">s2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 10 10</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/dimensions.html">res</a></span><span class="op">(</span><span class="va">l8_10m</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 10 10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>However, this is still not working because the two rasters do not have the exact extent.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">l8_10m</span> <span class="op">-</span> <span class="va">s2</span></span>
<span><span class="co">#&gt; Error: [-] extents do not match</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The solution is to use <code><a href="https://rdrr.io/pkg/terra/man/resample.html">resample()</a></code> to transfer the values of <code>l8</code> into the same geometry of <code>s2</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">l8_resampled</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/resample.html">resample</a></span><span class="op">(</span><span class="va">l8</span>, <span class="va">s2</span><span class="op">)</span></span>
<span></span>
<span><span class="va">l8_resampled</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 451, 451, 3  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 10, 10  (x, y)</span></span>
<span><span class="co">#&gt; extent      : 282040, 286550, 4564930, 4569440  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. : WGS 84 / UTM zone 17N (EPSG:32617) </span></span>
<span><span class="co">#&gt; source      : memory </span></span>
<span><span class="co">#&gt; names       : L8_B2_080415_TOA, L8_B3_080415_TOA, L8_B4_080415_TOA </span></span>
<span><span class="co">#&gt; min values  :       0.07844353,       0.06003592,       0.03450089 </span></span>
<span><span class="co">#&gt; max values  :        0.2486627,        0.2781480,        0.2809660</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>, oma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plotRGB.html">plotRGB</a></span><span class="op">(</span><span class="va">l8_resampled</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">1</span>, stretch <span class="op">=</span> <span class="st">"lin"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/mtext.html">mtext</a></span><span class="op">(</span><span class="st">"Landsat-8 (resampled to 10 meters)"</span>, side <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>Now, we can perform raster operations.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">l8_resampled</span> <span class="op">-</span> <span class="va">s2</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 451, 451, 3  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 10, 10  (x, y)</span></span>
<span><span class="co">#&gt; extent      : 282040, 286550, 4564930, 4569440  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. : WGS 84 / UTM zone 17N (EPSG:32617) </span></span>
<span><span class="co">#&gt; source      : memory </span></span>
<span><span class="co">#&gt; names       : L8_B2_080415_TOA, L8_B3_080415_TOA, L8_B4_080415_TOA </span></span>
<span><span class="co">#&gt; min values  :       -0.2693594,       -0.2698378,       -0.2766064 </span></span>
<span><span class="co">#&gt; max values  :        0.1274634,        0.1734840,        0.1898374</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="update-2022-07-30" class="level3"><h3 class="anchored" data-anchor-id="update-2022-07-30">UPDATE: 2022-07-30</h3>
<p><a href="https://twitter.com/mdsumner">Michael Sumner</a> on Twitter pointed out that the same resampling operation could be done using <code><a href="https://rdrr.io/pkg/terra/man/project.html">project()</a></code>.</p>
<blockquote class="twitter-tweet blockquote">
<p lang="en" dir="ltr">
project(l8, s2, method = "") uses the warper, resample() is a subset<br><br>bilinear is default method, gdal calls it -r resample, default there is "near"
</p>
— Michael Sumner (<span class="citation" data-cites="mdsumner">@mdsumner</span>) <a href="https://twitter.com/mdsumner/status/1529101265279795200?ref_src=twsrc%5Etfw">May 24, 2022</a>
</blockquote>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><p>Let’s try resampling <code>l8</code> onto the same grid as <code>s2</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">l8_resampled_project</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/project.html">project</a></span><span class="op">(</span><span class="va">l8</span>, <span class="va">s2</span><span class="op">)</span></span>
<span></span>
<span><span class="va">l8_resampled_project</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 451, 451, 3  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 10, 10  (x, y)</span></span>
<span><span class="co">#&gt; extent      : 282040, 286550, 4564930, 4569440  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. : WGS 84 / UTM zone 17N (EPSG:32617) </span></span>
<span><span class="co">#&gt; source      : memory </span></span>
<span><span class="co">#&gt; names       : L8_B2_080415_TOA, L8_B3_080415_TOA, L8_B4_080415_TOA </span></span>
<span><span class="co">#&gt; min values  :       0.07844353,       0.06003592,       0.03450089 </span></span>
<span><span class="co">#&gt; max values  :        0.2486627,        0.2781480,        0.2809660</span></span>
<span><span class="va">l8_resampled</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 451, 451, 3  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 10, 10  (x, y)</span></span>
<span><span class="co">#&gt; extent      : 282040, 286550, 4564930, 4569440  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. : WGS 84 / UTM zone 17N (EPSG:32617) </span></span>
<span><span class="co">#&gt; source      : memory </span></span>
<span><span class="co">#&gt; names       : L8_B2_080415_TOA, L8_B3_080415_TOA, L8_B4_080415_TOA </span></span>
<span><span class="co">#&gt; min values  :       0.07844353,       0.06003592,       0.03450089 </span></span>
<span><span class="co">#&gt; max values  :        0.2486627,        0.2781480,        0.2809660</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Indeed, this is working perfectly fine and we can see that <code>l8_resampled_project</code> is now on the same 10 m by 10 m grid as <code>s2</code>.</p>
<p>Whereas this is working fine, I thought it was worth mentioning that if you <strong>only want to reproject a raster</strong> and not change the dimensions of the grid, one should use the destination CRS rather than the raster itself. Here both <code>l8</code> and <code>s2</code> have the same CRS and hence only reprojecting (i.e.&nbsp;without resampling) will not change the coordinate system.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/identical.html">identical</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/crs.html">crs</a></span><span class="op">(</span><span class="va">l8</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/crs.html">crs</a></span><span class="op">(</span><span class="va">s2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>However, let’s do it for demonstration purposes.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/project.html">project</a></span><span class="op">(</span><span class="va">l8</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/crs.html">crs</a></span><span class="op">(</span><span class="va">s2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 150, 150, 3  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 30, 30  (x, y)</span></span>
<span><span class="co">#&gt; extent      : 282045, 286545, 4564935, 4569435  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. : WGS 84 / UTM zone 17N (EPSG:32617) </span></span>
<span><span class="co">#&gt; source      : memory </span></span>
<span><span class="co">#&gt; names       : L8_B2_080415_TOA, L8_B3_080415_TOA, L8_B4_080415_TOA </span></span>
<span><span class="co">#&gt; min values  :       0.07772131,       0.05887134,       0.03377673 </span></span>
<span><span class="co">#&gt; max values  :        0.2687978,        0.3173852,        0.3191263</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>As we can see, using <code>project(l8, crs(s2))</code> instead of <code>project(l8, s2)</code> will not change the pixel resolution of the reprojected raster. The reprojected <code>l8</code> raster still has a pixel resolution of 30 m by 30 m.</p>
<details><summary>
Session info
</summary><div class="cell" data-layout-align="center">
<pre><code>#&gt; ─ Session info ───────────────────────────────────────────────────────────────────────────────────────────────────────
#&gt;  setting  value
#&gt;  version  R version 4.2.1 (2022-06-23)
#&gt;  os       Ubuntu 22.04 LTS
#&gt;  system   x86_64, linux-gnu
#&gt;  ui       X11
#&gt;  language en_CA:en
#&gt;  collate  en_CA.UTF-8
#&gt;  ctype    en_CA.UTF-8
#&gt;  tz       America/Toronto
#&gt;  date     2022-07-30
#&gt;  pandoc   2.18 @ /usr/lib/rstudio/bin/quarto/bin/tools/ (via rmarkdown)
#&gt; 
#&gt; ─ Packages ───────────────────────────────────────────────────────────────────────────────────────────────────────────
#&gt;  package     * version date (UTC) lib source
#&gt;  cachem        1.0.6   2021-08-19 [1] RSPM (R 4.2.0)
#&gt;  callr         3.7.1   2022-07-13 [1] RSPM (R 4.2.0)
#&gt;  cli           3.3.0   2022-04-25 [1] RSPM (R 4.2.0)
#&gt;  codetools     0.2-18  2020-11-04 [2] CRAN (R 4.2.1)
#&gt;  crayon        1.5.1   2022-03-26 [1] RSPM (R 4.2.0)
#&gt;  devtools      2.4.4   2022-07-20 [1] RSPM (R 4.2.0)
#&gt;  digest        0.6.29  2021-12-01 [1] RSPM (R 4.2.0)
#&gt;  ellipsis      0.3.2   2021-04-29 [1] RSPM (R 4.2.0)
#&gt;  evaluate      0.15    2022-02-18 [1] RSPM (R 4.2.0)
#&gt;  fastmap       1.1.0   2021-01-25 [1] RSPM (R 4.2.0)
#&gt;  fs            1.5.2   2021-12-08 [1] RSPM (R 4.2.0)
#&gt;  glue          1.6.2   2022-02-24 [1] RSPM (R 4.2.0)
#&gt;  htmltools     0.5.3   2022-07-18 [1] RSPM (R 4.2.0)
#&gt;  htmlwidgets   1.5.4   2021-09-08 [1] RSPM (R 4.2.0)
#&gt;  httpuv        1.6.5   2022-01-05 [1] RSPM (R 4.2.0)
#&gt;  jsonlite      1.8.0   2022-02-22 [1] RSPM (R 4.2.0)
#&gt;  knitr         1.39    2022-04-26 [1] RSPM (R 4.2.0)
#&gt;  later         1.3.0   2021-08-18 [1] CRAN (R 4.2.1)
#&gt;  lifecycle     1.0.1   2021-09-24 [1] RSPM (R 4.2.0)
#&gt;  magrittr      2.0.3   2022-03-30 [1] RSPM (R 4.2.0)
#&gt;  memoise       2.0.1   2021-11-26 [1] RSPM (R 4.2.0)
#&gt;  mime          0.12    2021-09-28 [1] RSPM (R 4.2.0)
#&gt;  miniUI        0.1.1.1 2018-05-18 [1] RSPM (R 4.2.0)
#&gt;  pkgbuild      1.3.1   2021-12-20 [1] RSPM (R 4.2.0)
#&gt;  pkgload       1.3.0   2022-06-27 [1] RSPM (R 4.2.0)
#&gt;  prettyunits   1.1.1   2020-01-24 [1] RSPM (R 4.2.0)
#&gt;  processx      3.7.0   2022-07-07 [1] RSPM (R 4.2.0)
#&gt;  profvis       0.3.7   2020-11-02 [1] RSPM (R 4.2.0)
#&gt;  promises      1.2.0.1 2021-02-11 [1] RSPM (R 4.2.0)
#&gt;  ps            1.7.1   2022-06-18 [1] RSPM (R 4.2.0)
#&gt;  purrr         0.3.4   2020-04-17 [1] RSPM (R 4.2.0)
#&gt;  R6            2.5.1   2021-08-19 [1] RSPM (R 4.2.0)
#&gt;  Rcpp          1.0.9   2022-07-08 [1] RSPM (R 4.2.0)
#&gt;  remotes       2.4.2   2021-11-30 [1] CRAN (R 4.2.1)
#&gt;  rlang         1.0.4   2022-07-12 [1] RSPM (R 4.2.0)
#&gt;  rmarkdown     2.14    2022-04-25 [1] RSPM (R 4.2.0)
#&gt;  rspm          0.1.0.3 2022-07-27 [1] Github (Enchufa2/rspm@ba091ae)
#&gt;  rstudioapi    0.13    2020-11-12 [1] RSPM (R 4.2.0)
#&gt;  sessioninfo   1.2.2   2021-12-06 [1] RSPM (R 4.2.0)
#&gt;  shiny         1.7.2   2022-07-19 [1] RSPM (R 4.2.0)
#&gt;  stringi       1.7.8   2022-07-11 [1] RSPM (R 4.2.0)
#&gt;  stringr       1.4.0   2019-02-10 [1] RSPM (R 4.2.0)
#&gt;  terra       * 1.6-3   2022-07-25 [1] RSPM (R 4.2.0)
#&gt;  urlchecker    1.0.1   2021-11-30 [1] RSPM (R 4.2.0)
#&gt;  usethis       2.1.6   2022-05-25 [1] CRAN (R 4.2.1)
#&gt;  xfun          0.31    2022-05-10 [1] RSPM (R 4.2.0)
#&gt;  xtable        1.8-4   2019-04-21 [1] CRAN (R 4.2.1)
#&gt;  yaml          2.3.5   2022-02-21 [1] RSPM (R 4.2.0)
#&gt; 
#&gt;  [1] /home/filoche/R/x86_64-pc-linux-gnu-library/4.2
#&gt;  [2] /opt/R/4.2.1/lib/R/library
#&gt; 
#&gt; ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</code></pre>
</div>
</details>

</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><script src="https://utteranc.es/client.js" repo="pmassicotte/r-blog" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->



</body></html>