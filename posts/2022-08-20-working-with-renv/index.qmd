---
title: "title"
author: "Philippe Massicotte"
date: "2022-08-20"
categories: [R, ...]
# https://quarto.org/docs/websites/website-tools.html#preview-images
image: "img/preview.png" 
editor_options: 
  chunk_output_type: console
draft: true
---

I am using `renv` quite a lot. Recently, I had to return to an older project that was using this package to manage package dependencies. When I tried to load `tidyverse`, I got the folowing message:

```r
> library(tidyverse)
Error: package or namespace load failed for ‘tidyverse’ in dyn.load(file, DLLpath = DLLpath, ...):
  unable to load shared object '/home/xxx/.local/share/renv/cache/v5/R-4.2/x86_64-pc-linux-gnu/stringi/1.7.6/bba431031d30789535745a9627ac9271/stringi/libs/stringi.so':
  libicui18n.so.66: cannot open shared object file: No such file or directory
```

This [means](https://github.com/rstudio/renv/issues/309) that `stringi` was originally compiled with a certain version of `libicui18n`, and that after a system update/upgrade, this file no longer exists. What you have to do is to rebuild the `stringi` package using the new version of `libicui18n` installed on your computer. To do it so, you can use `renv::install()`.

```{r}
#| eval: false
renv::install(
  "stringi@1.7.6",
  rebuild = TRUE,
  repos = "https://cran.rstudio.com/"
)
```

`stringi@1.7.6` means to install the version 1.7.6, the same version that was included in the `renv.lock` file.


![Let's crop something! Photo by <a href="https://unsplash.com/@rozetsky?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Ant Rozetsky</a> on <a href="https://unsplash.com/s/photos/crop?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText">Unsplash</a>](img/preview.png){fig-alt="Close up on a grain field" fig-align="center"}

If for whatever reason you have to change to a specific version of a R package, you can use the following approach to modify the `renv.lock` file:

```{r}
#| eval: false
renv::record("stringi@1.7.6")
```


<details>
  
<summary>Session info</summary>

```{r sessioninfo, echo = FALSE}
## Reproducibility info
options(width = 120)
devtools::session_info()
```

</details>

